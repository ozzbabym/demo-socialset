{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/ProfileInfo/ProfileStatus.jsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["module","exports","Post","props","className","s","content","item","src","message","like","maxLength10","maxLengthCreator","AddNewPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","name","component","Textarea","placeholder","validate","required","MyPosts","React","memo","postsElement","PostsData","reverse","map","post","createRef","postsBlock","value","addPost","newPostText","posts","Component","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","onBlur","updateStatus","autoFocus","onChange","e","currentTarget","ProfileInfo","profile","isOwner","savePhoto","Preloader","photo","descriptionBlock","photos","large","userPhoto","mainPhoto","type","target","files","length","MyPostsConteiner","connect","state","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getUserProfile","getStatus","refreshProfile","prevProps","prevState","snapshot","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/3.1014e0bd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3AjNT\",\"photo\":\"ProfileInfo_photo__yC6KC\",\"mainPhoto\":\"ProfileInfo_mainPhoto__2OWbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__1CaXi\",\"posts\":\"MyPosts_posts__TN7Lm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3P4L_\"};","import React from \"react\";\r\nimport s from \"./Post.module.css\";\r\n\r\nconst Post = (props) => {\r\n  return (\r\n    <div className={s.content}>\r\n      <div>\r\n        <div className={s.item}>\r\n          <img src=\"https://c.wallhere.com/photos/1e/7d/1600x1200_px_action_adventure_alien_Aliens_Avatar_fantasy_fi-1635355.jpg!d\" />\r\n          {props.message}\r\n          <div>\r\n            <span>Like </span> {props.like}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React from \"react\";\r\nimport s from \"./MyPosts.module.css\";\r\nimport Post from \"./Post/Post\";\r\nimport {Field, reduxForm} from 'redux-form'\r\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\"\r\nimport { Textarea } from \"../../common/FormsControls/FormsControls\";\r\n\r\nconst maxLength10 = maxLengthCreator(10)\r\n\r\nconst AddNewPostForm=(props)=>{\r\n  return(\r\n    <form onSubmit={props.handleSubmit}>\r\n        <div>\r\n          <Field \r\n          name={\"newPostText\"} component={Textarea} placeholder={'Post message'} \r\n          validate={[required ,maxLength10 ]}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button>add post</button>\r\n          \r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nlet AddNewPostFormRedux = reduxForm({form:\"ProfileAddNewPostForm\"})(AddNewPostForm)\r\n\r\n\r\n\r\n\r\nconst MyPosts = React.memo ((props) => {\r\n  //reverse перевернул все посты\r\n  let postsElement = [...props.PostsData].reverse().map((post) => (\r\n    <Post message={post.message} like={post.like} />\r\n  ));\r\n\r\n  let newPostElement = React.createRef();\r\n\r\n  let onAddPost = (value) => {\r\n    props.addPost(value.newPostText);\r\n    \r\n  };\r\n  let onPostChange = () => {\r\n    let text = newPostElement.current.value;\r\n    props.updateNewPostText(text);\r\n    \r\n  }\r\n\r\n\r\n  return (\r\n    <div className={s.postsBlock}>\r\n      <h3>My Posts</h3>\r\n      <AddNewPostFormRedux onSubmit={onAddPost} />\r\n      <div className={s.posts}>{postsElement}</div>\r\n    </div>\r\n  );\r\n})\r\n\r\n\r\n\r\nexport default MyPosts;\r\n","import React from \"react\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport s from \"./ProfileInfo.module.css\";\r\n\r\nclass ProfileStatus extends React.Component {\r\n  \r\n\r\n  state = {\r\n    editMode: false,\r\n    status: this.props.status\r\n    \r\n    \r\n  };\r\n\r\n  activateEditMode=()=>{\r\n    \r\n      this.setState({\r\n          editMode:true\r\n      })\r\n    \r\n    \r\n  }\r\n\r\n  deactivateEditMode=()=>{\r\n    \r\n    this.setState({\r\n        editMode:false\r\n    })\r\n    this.props.updateStatus(this.state.status)\r\n}\r\n\r\nonStatusChange = (e)=>{\r\n  this.setState({\r\n    status: e.currentTarget.value\r\n  })\r\n  \r\n\r\n}\r\ncomponentDidUpdate(prevProps, prevState){\r\n  if (prevProps.status!==this.props.status){\r\n  this.setState({\r\n    status: this.props.status\r\n  })}\r\n\r\n  \r\n  console.log(\"Component\")\r\n}\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div>\r\n          {!this.state.editMode && (\r\n            <div>\r\n              <span onDoubleClick={this.activateEditMode}>{this.props.status || \"-----\"}</span>\r\n            </div>\r\n          )}\r\n          {this.state.editMode && (\r\n            <div>\r\n              <input onChange={this.onStatusChange} autoFocus={true} onBlur={this.deactivateEditMode}\r\n               value={this.state.status} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProfileStatus;\r\n","import React,{useEffect, useState} from \"react\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport s from \"./ProfileInfo.module.css\";\r\n\r\nconst ProfileStatusWithHooks = (props) => {\r\n\r\n  // let stateWithSetState=useState(true)\r\n  let [editMode,setEditMode]=useState(false)\r\n  let [status,setStatus]=useState(props.status)\r\n\r\n  useEffect(()=>{\r\n    setStatus(props.status)\r\n  },[props.status])\r\n\r\n  const activateEditMode=()=>{\r\n    setEditMode(true)\r\n  }\r\n\r\n  const deactivateEditMode=()=>{\r\n    \r\n    setEditMode(false)\r\n    props.updateStatus(status)\r\n}\r\n\r\nconst onStatusChange = (e)=>{\r\n  setStatus(e.currentTarget.value)\r\n  }\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        { !editMode &&\r\n          <div>\r\n            <span onDoubleClick={activateEditMode}>\r\n              {props.status || \"-----\"}\r\n            </span>\r\n          </div>\r\n        }\r\n        {editMode && (\r\n          <div>\r\n            <input\r\n               onBlur={deactivateEditMode}\r\n              autoFocus={true}\r\n              onChange={onStatusChange}\r\n              value={status}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProfileStatusWithHooks;\r\n","import React from \"react\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport s from \"./ProfileInfo.module.css\";\r\nimport ProfileStatus from \"./ProfileStatus\"\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport userPhoto from \"../../../assets/images/user.png\";\r\n\r\nconst ProfileInfo = ({profile,status,updateStatus, isOwner,savePhoto}) => {\r\n  if (!profile){\r\n    return <Preloader />\r\n  }\r\n \r\n  const onMainPhotoSelected =(e)=>{\r\n   if (e.target.files.length){\r\n     savePhoto(e.target.files[0])\r\n   }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className={s.photo}>\r\n        <img src=\"https://fsb.zobj.net/crop.php?r=uEDtONmQiHTBf8m1XAv1MqjMMP0WjO2F1HNDq4xqlN9OATMrqJhDFvGYf80SGATpMGtEJASI0nEKZz-ceg255n9-HpXZpQdCy8XFqBK7Y2_J9JDhjNfF_YvlxGORHxSbuDffdEjFIm6HAgaP\" />\r\n      </div>\r\n      <div className={s.descriptionBlock}>\r\n        <img src={profile.photos.large || userPhoto} className={s.mainPhoto} />\r\n        {isOwner && <input type={\"file\"} onChange={onMainPhotoSelected} /> }\r\n          <ProfileStatusWithHooks status={status} updateStatus={updateStatus}/>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileInfo;\r\n","import React from \"react\";\r\nimport {\r\n  \r\n  addPostActionCreator,\r\n} from \"../../../redux/profile-reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  \r\n  return {\r\n    PostsData: state.profilePage.PostsData,\r\n    newPostText: state.profilePage.newPostText,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    \r\n    addPost: (newPostText) => {\r\n      dispatch(addPostActionCreator(newPostText));\r\n    },\r\n  };\r\n};\r\n\r\nlet MyPostsConteiner = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsConteiner;\r\n","import React from \"react\";\r\nimport s from \"./Profile.module.css\";\r\nimport MyPosts from \"./MyPosts/MyPosts\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsConteiner from \"./MyPosts/MyPostsContainer\";\r\n\r\n\r\nconst Profile = (props) => {\r\n  \r\n  return (\r\n    <div >\r\n      <ProfileInfo savePhoto={props.savePhoto} isOwner={props.isOwner} profile={props.profile} status={props.status} updateStatus={props.updateStatus}/>\r\n      <MyPostsConteiner />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import * as axios from \"axios\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, withRouter } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\nimport { usersAPI } from \"../../api/api\";\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { getStatus, getUserProfile, updateStatus, savePhoto } from \"../../redux/profile-reducer\";\r\nimport Profile from \"./Profile\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n  refreshProfile(){\r\n    let userId = this.props.match.params.userId;\r\n    if (!userId) {\r\n      userId = this.props.authorizedUserId;\r\n      if(!userId){\r\n        this.props.history.push(\"/login\")\r\n      }\r\n    }\r\n    this.props.getUserProfile(userId)\r\n    this.props.getStatus(userId)\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    this.refreshProfile()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot){\r\n    if(this.props.match.params.userId != prevProps.match.params.userId){\r\n      this.refreshProfile()\r\n    }\r\n    \r\n    \r\n  }\r\n\r\n  render() {\r\n    return <Profile {...this.props} \r\n        isOwner={!this.props.match.params.userId}\r\n        profile={this.props.profile} \r\n        status={this.props.status} \r\n        updateStatus={this.props.updateStatus}\r\n        savePhoto={this.props.savePhoto}\r\n        />;\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n  profile: state.profilePage.profile,\r\n  status: state.profilePage.status,\r\n  authorizedUserId: state.auth.userId,\r\n  isAuth: state.auth.isAuth\r\n  \r\n});\r\n\r\nexport default compose(connect(mapStateToProps,{ getUserProfile, getStatus, updateStatus,savePhoto }),withRouter)(ProfileContainer)\r\n\r\n\r\n// let AuthRedirectComponent = withAuthRedirect(ProfileContainer)\r\n\r\n\r\n\r\n// let WithUrlDataContainerComponent = withRouter(AuthRedirectComponent);\r\n\r\n// export default connect(mapStateToProps,{ getUserProfile })(\r\n//   WithUrlDataContainerComponent\r\n// );\r\n"],"sourceRoot":""}